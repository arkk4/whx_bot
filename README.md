# WHx Bot README

<div align="center">
<a href="#ukrainian">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</a> ‚Ä¢ <a href="#english">English</a> ‚Ä¢ <a href="#nederlands">Nederlands</a>
</div>

---

<a name="ukrainian"></a>

## üá∫üá¶ WHx Bot (–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞)

**WHx Bot** ‚Äî —Ü–µ –±–∞–≥–∞—Ç–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π Telegram-–±–æ—Ç, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –æ—Ä–µ–Ω–¥–∏ –Ω–∞ –Ω—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫–æ–º—É —Å–∞–π—Ç—ñ `woninghuren.nl`. –ë–æ—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫–∞ –º–æ–≤, –¥–æ–∑–≤–æ–ª—è—î –≥–Ω—É—á–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å, –∞ —Ç–∞–∫–æ–∂ –≤–∫–ª—é—á–∞—î –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏.

### üöÄ –ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

*   **–ú–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:** –ë–æ—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î API –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –Ω–æ–≤–∏—Ö –æ–≥–æ–ª–æ—à–µ–Ω—å —ñ –Ω–∞–¥—Å–∏–ª–∞—î —ó—Ö –∞–∫—Ç–∏–≤–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º.
*   **–ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó, –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó —Ç–∞ –Ω—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫–æ—ó –º–æ–≤.
*   **–ì–Ω—É—á–∫—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –≤–º–∏–∫–∞—Ç–∏/–≤–∏–º–∏–∫–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è, –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –º–æ–≤—É —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω—å.
*   **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É:** –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
*   **–ü–µ—Ä–µ–≥–ª—è–¥ –æ–≥–æ–ª–æ—à–µ–Ω—å:** –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∞–∫—Ç–∏–≤–Ω–∏—Ö —Ç–∞ –Ω–µ—â–æ–¥–∞–≤–Ω—ñ—Ö –æ–≥–æ–ª–æ—à–µ–Ω—å –∑ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è–º —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é.
*   **–°–∏—Å—Ç–µ–º–∞ –¥–æ–Ω–∞—Ç—ñ–≤:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ Telegram Stars.

### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

| –§–∞–π–ª                | –û–ø–∏—Å                                                                                                                                                                                                                                                                  |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `main.py`           | **–û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞.** –ú—ñ—Å—Ç–∏—Ç—å –ª–æ–≥—ñ–∫—É, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ä–æ–±–æ—Ç—É –∑ Telegram API (`python-telegram-bot`). –û–±—Ä–æ–±–ª—è—î –∫–æ–º–∞–Ω–¥–∏, –∫–µ—Ä—É—î —Å—Ç–∞–Ω–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–º–æ–≤–∞, –ø—ñ–¥–ø–∏—Å–∫–∏) —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö SQLite, –∑–∞–ø—É—Å–∫–∞—î –ø–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –æ–≥–æ–ª–æ—à–µ–Ω—å —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è. |
| `tracker.py`        | **–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å –Ω–∞ FastAPI.** –°—Ç–≤–æ—Ä—é—î –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î –¥–≤—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó: 1) –í—ñ–¥—Å—Ç–µ–∂—É—î –∫–ª—ñ–∫–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –Ω–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –¥–ª—è –∑–±–æ—Ä—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. 2) –ù–∞–¥–∞—î –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.    |
| `i18n.py`           | **–§–∞–π–ª —ñ–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—ó (i18n).** –ú—ñ—Å—Ç–∏—Ç—å —Å–ª–æ–≤–Ω–∏–∫ `TRANSLATIONS` –∑ —É—Å—ñ–º–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏–º–∏ —Ä—è–¥–∫–∞–º–∏, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –≤ –±–æ—Ç—ñ, –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–∏–º–∏ –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—É, –∞–Ω–≥–ª—ñ–π—Å—å–∫—É —Ç–∞ –Ω—ñ–¥–µ—Ä–ª–∞–Ω–¥—Å—å–∫—É –º–æ–≤–∏. –¶–µ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑—É—î —Ç–µ–∫—Å—Ç–∏ —Ç–∞ —Å–ø—Ä–æ—â—É—î –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –º–æ–≤.         |
| `requirements.txt`  | –ü–µ—Ä–µ–ª—ñ–∫ —É—Å—ñ—Ö Python-–±—ñ–±–ª—ñ–æ—Ç–µ–∫, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –¥–ª—è —Ä–æ–±–æ—Ç–∏ –ø—Ä–æ—î–∫—Ç—É (`python-telegram-bot`, `fastapi`, `requests` —Ç–æ—â–æ). –í—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ—é `pip install -r requirements.txt`.                                                                                      |
| `.env-template`     | **–®–∞–±–ª–æ–Ω —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.** –ú—ñ—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞, —è–∫—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ —Ç–∞ —Ç—Ä–µ–∫–µ—Ä–∞ (—Ç–æ–∫–µ–Ω–∏, —à–ª—è—Ö–∏ –¥–æ —Ñ–∞–π–ª—ñ–≤, URL-–∞–¥—Ä–µ—Å–∏).                                                                                                                     |

### üõ†Ô∏è –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

–ü—Ä–æ—î–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –æ–∫—Ä–µ–º–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤: –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ —Ç–∞ —Ç—Ä–µ–∫–µ—Ä–∞. –á—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ.

1.  **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**
    ```bash
    git clone https://github.com/arkk4/whx_bot.git
    cd whx_bot
    ```

2.  **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
    *   –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env-template`.
    *   –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ, —Ç–∞–∫—ñ —è–∫ `TELEGRAM_BOT_TOKEN`, `PROVIDER_TOKEN`, `DATABASE_PATH`, `API_URL` —Ç–æ—â–æ.
    *   `TRACKER_BASE_URL` –º–∞—î –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –∞–¥—Ä–µ—Å—É, –¥–µ –±—É–¥–µ –∑–∞–ø—É—â–µ–Ω–æ —Å–µ—Ä–≤—ñ—Å `tracker.py` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `http://localhost:8000`).

4.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç—Ä–µ–∫–µ—Ä:**
    –í—ñ–¥–∫—Ä–∏–π—Ç–µ –æ–¥–∏–Ω —Ç–µ—Ä–º—ñ–Ω–∞–ª —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤–µ–±-—Å–µ—Ä–≤—ñ—Å —Ç—Ä–µ–∫–µ—Ä–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Uvicorn:
    ```bash
    uvicorn tracker:app --host 0.0.0.0 --port 8000
    ```

5.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞:**
    –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥—Ä—É–≥–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
    ```bash
    python main.py
    ```
    –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –±–æ—Ç –±—É–¥–µ –æ–Ω–ª–∞–π–Ω —ñ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏.

### ‚úÖ TODO

*   [ ] **–õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç—Ä–µ–∫–µ—Ä–∞:** –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –∫—ñ–ª—å–∫–æ—Ö –º–æ–≤ –¥–ª—è HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å—É –≤ `tracker.py`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É.
*   [ ] **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤:** –ü–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ª–æ–≥–µ—Ä–∞ –≤ –∫–æ–¥—ñ –Ω–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É –º–æ–≤—É –¥–ª—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º —Ä–æ–∑—Ä–æ–±–∫–∏.
*   [ ] **–†–æ–∑—à–∏—Ä–µ–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** –ù–∞–ø–∏—Å–∞—Ç–∏ unit-—Ç–µ—Å—Ç–∏ –¥–ª—è `DatabaseManager` —Ç–∞ –∫–ª—é—á–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –±–æ—Ç–∞ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ.
*   [ ] **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –º–æ–∂–ª–∏–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫ –≤—ñ–¥ API —Ç–∞ —Å–µ—Ä–≤—ñ—Å—É —Ç—Ä–µ–∫–µ—Ä–∞.

---

<a name="english"></a>

## üá¨üáß WHx Bot (English)

**WHx Bot** is a multifunctional Telegram bot designed to track and notify about new rental listings on the Dutch website `woninghuren.nl`. The bot supports multiple languages, allows flexible configuration of notifications and time zones, and includes an analytics microservice for tracking link clicks.

### üöÄ Key Features

*   **Instant Notifications:** The bot periodically checks an API for new listings and sends them to active users.
*   **Multilingual Interface:** Full support for Ukrainian, English, and Dutch.
*   **Flexible Settings:** Users can enable/disable notifications, change the language, and manage link tracking.
*   **Automatic Time Zone Detection:** An interactive web page for setting the user's time zone.
*   **Listing Browser:** Built-in functionality to view active and recent listings with sorting and pagination.
*   **Donation System:** Ability to support the developer via Telegram Stars.

### üìÇ File Structure

| File                | Description                                                                                                                                                                                                                                                           |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `main.py`           | **The main bot file.** Contains the logic for interacting with the Telegram API (`python-telegram-bot`). It handles commands, manages user state (language, subscriptions) in an SQLite database, runs periodic jobs to check for listings, and sends notifications. |
| `tracker.py`        | **An analytics microservice using FastAPI.** It creates a web server with two main functions: 1) Tracking clicks on listing links for statistical purposes. 2) Providing a web page to automatically detect and save the user's time zone.                             |
| `i18n.py`           | **Internationalization (i18n) file.** Contains the `TRANSLATIONS` dictionary with all text strings used in the bot, translated into Ukrainian, English, and Dutch. This centralizes texts and simplifies adding new languages.                                        |
| `requirements.txt`  | A list of all Python libraries required for the project (`python-telegram-bot`, `fastapi`, `requests`, etc.). Install with `pip install -r requirements.txt`.                                                                                                          |
| `.env-template`     | **Configuration file template.** Contains a list of all environment variables needed to run the bot and the tracker (tokens, file paths, URLs).                                                                                                                         |

### üõ†Ô∏è How to Use

The project consists of two separate services: the main bot and the tracker. They need to be run in parallel.

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/arkk4/whx_bot.git
    cd whx_bot
    ```

2.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Set up environment variables:**
    *   Create a `.env` file from the `.env-template`.
    *   Fill in all the required variables, such as `TELEGRAM_BOT_TOKEN`, `PROVIDER_TOKEN`, `DATABASE_PATH`, `API_URL`, etc.
    *   `TRACKER_BASE_URL` should point to the address where the `tracker.py` service will run (e.g., `http://localhost:8000`).

4.  **Run the tracker:**
    Open one terminal and run the tracker web service using Uvicorn:
    ```bash
    uvicorn tracker:app --host 0.0.0.0 --port 8000
    ```

5.  **Run the main bot:**
    Open a second terminal and run the bot:
    ```bash
    python main.py
    ```
    The bot will now be online and ready to work.

### ‚úÖ TODO

*   [ ] **Localize Tracker Page:** Add multi-language support to the time zone setting HTML page in `tracker.py` using query parameters.
*   [ ] **Refactor Comments:** Rewrite comments and logger messages in the code to English to align with international development standards.
*   [ ] **Enhanced Testing:** Write unit tests for the `DatabaseManager` and key bot functions to ensure stability.
*   [ ] **Error Handling:** Improve the handling of potential errors from the API and tracker service.

---

<a name="nederlands"></a>

## üá≥üá± WHx Bot (Nederlands)

**WHx Bot** is een multifunctionele Telegram-bot die is ontworpen om nieuwe huuradvertenties op de Nederlandse website `woninghuren.nl` te volgen en erover te informeren. De bot ondersteunt meerdere talen, maakt flexibele configuratie van meldingen en tijdzones mogelijk, en bevat een analytische microservice voor het bijhouden van link-klikken.

### üöÄ Belangrijkste Kenmerken

*   **Directe Meldingen:** De bot controleert periodiek een API op nieuwe advertenties en stuurt deze naar actieve gebruikers.
*   **Meertalige Interface:** Volledige ondersteuning voor Oekra√Øens, Engels en Nederlands.
*   **Flexibele Instellingen:** Gebruikers kunnen meldingen in- of uitschakelen, de taal wijzigen en het volgen van links beheren.
*   **Automatische Tijdzone Detectie:** Een interactieve webpagina voor het instellen van de tijdzone van de gebruiker.
*   **Advertenties Bekijken:** Ingebouwde functionaliteit om actieve en recente advertenties te bekijken met sortering en paginering.
*   **Donatiesysteem:** Mogelijkheid om de ontwikkelaar te steunen via Telegram Stars.

### üìÇ Bestandsstructuur

| Bestand             | Beschrijving                                                                                                                                                                                                                                                        |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `main.py`           | **Het hoofdbestand van de bot.** Bevat de logica voor interactie met de Telegram API (`python-telegram-bot`). Het verwerkt commando's, beheert de gebruikersstatus (taal, abonnementen) in een SQLite-database, voert periodieke taken uit om advertenties te controleren en stuurt meldingen. |
| `tracker.py`        | **Een analytische microservice met FastAPI.** Het cre√´ert een webserver met twee hoofdfuncties: 1) Het bijhouden van klikken op advertentielinks voor statistische doeleinden. 2) Het aanbieden van een webpagina om automatisch de tijdzone van de gebruiker te detecteren en op te slaan. |
| `i18n.py`           | **Internationalisatie (i18n) bestand.** Bevat de `TRANSLATIONS` dictionary met alle tekststrings die in de bot worden gebruikt, vertaald naar het Oekra√Øens, Engels en Nederlands. Dit centraliseert teksten en vereenvoudigt het toevoegen van nieuwe talen.          |
| `requirements.txt`  | Een lijst van alle Python-bibliotheken die nodig zijn voor het project (`python-telegram-bot`, `fastapi`, `requests`, enz.). Te installeren met `pip install -r requirements.txt`.                                                                                    |
| `.env-template`     | **Configuratiebestand sjabloon.** Bevat een lijst van alle omgevingsvariabelen die nodig zijn om de bot en de tracker te draaien (tokens, bestandspaden, URL's).                                                                                                      |

### üõ†Ô∏è Hoe te Gebruiken

Het project bestaat uit twee afzonderlijke services: de hoofdbot en de tracker. Ze moeten parallel worden uitgevoerd.

1.  **Kloon de repository:**
    ```bash
    git clone https://github.com/arkk4/whx_bot.git
    cd whx_bot
    ```

2.  **Installeer de afhankelijkheden:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Stel de omgevingsvariabelen in:**
    *   Maak een `.env`-bestand aan op basis van `.env-template`.
    *   Vul alle vereiste variabelen in, zoals `TELEGRAM_BOT_TOKEN`, `PROVIDER_TOKEN`, `DATABASE_PATH`, `API_URL`, etc.
    *   `TRACKER_BASE_URL` moet verwijzen naar het adres waar de `tracker.py`-service zal draaien (bijv. `http://localhost:8000`).

4.  **Start de tracker:**
    Open een terminal en start de tracker-webservice met Uvicorn:
    ```bash
    uvicorn tracker:app --host 0.0.0.0 --port 8000
    ```

5.  **Start de hoofdbot:**
    Open een tweede terminal en start de bot:
    ```bash
    python main.py
    ```
    De bot is nu online en klaar voor gebruik.

### ‚úÖ TODO

*   [ ] **Tracker-pagina Lokaliseren:** Voeg meertalige ondersteuning toe aan de HTML-pagina voor tijdzone-instelling in `tracker.py` met behulp van queryparameters.
*   [ ] **Commentaar Refactoren:** Herschrijf opmerkingen en logberichten in de code naar het Engels om te voldoen aan internationale ontwikkelingsnormen.
*   [ ] **Uitgebreid Testen:** Schrijf unit-tests voor de `DatabaseManager` en belangrijke botfuncties om de stabiliteit te garanderen.
*   [ ] **Foutafhandeling:** Verbeter de afhandeling van mogelijke fouten van de API en de tracker-service.
